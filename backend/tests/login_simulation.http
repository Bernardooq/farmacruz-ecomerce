# И Simulaci贸n de Login - VSCode REST Client
# ==========================================
# Requisitos: Extensi贸n "REST Client" de Huachao Mao instalada en VSCode.
# Uso: Haz clic en "Send Request" que aparece sobre cada URL.

#  Configuraci贸n de Entorno
# Descomenta la l铆nea que quieras usar (Local o Producci贸n)

# @host = http://localhost:8000
@host = https://api.farmacruz.com.mx
# Si tienes problemas de timeout, intenta aumentar "rest-client.timeoutinmilliseconds" en tus settings de VSCode
# O prueba con HTTP si HTTPS no responde:
# @host = http://api.farmacruz.com.mx

#  Credenciales (C谩mbialas por las tuyas)
@username = manuel.saenz.admin
@password = farmasaenz2026

###
# 1锔 Login (Obtener Token)
# Este request autentica al usuario y guarda el token en la variable {{login.response.body.access_token}}
# que se usa autom谩ticamente en los siguientes requests.
# @name login
POST {{host}}/api/v1/auth/login
Content-Type: application/x-www-form-urlencoded

username={{username}}
&password={{password}}

###
# 2锔 Verificar Token (Get Me)
# Usa el token obtenido arriba para ver tus datos de usuario.
GET {{host}}/api/v1/users/me
Authorization: Bearer {{login.response.body.access_token}}

###
# 3锔 Ejemplo: Listar Productos (Endpoint Protegido)
# Prueba de que el token funciona en otras rutas.
GET {{host}}/api/v1/products?skip=0&limit=5
Authorization: Bearer {{login.response.body.access_token}}
